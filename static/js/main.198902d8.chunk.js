(this["webpackJsonpdy-forklift-notifier"]=this["webpackJsonpdy-forklift-notifier"]||[]).push([[0],{28:function(e,t,o){"use strict";o.r(t);var c=o(0),a=o.n(c),r=o(12),i=o.n(r),n=o(17),s=o(3),l=o(30),d=o(10),p=o(11),b=o(7);Object(p.a)({apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a",measurementId:"G-2QJDPH5EGW"});var f=function(){const{id:e}=Object(s.q)(),[t,o]=Object(c.useState)(""),[a,r]=Object(c.useState)(null);Object(c.useEffect)((()=>{const t=Object(d.a)();t.requestPermission().then((()=>t.getToken({vapidKey:"qVbu8IcLjOokqpyf2rAFDH9yfm7cW4C131XYO2mTKho"}))).then((t=>(console.log("Token:",t),l.a.post("http://your-server-ip:5000/subscribe",{token:t,topic:"forklift-".concat(e)})))).then((e=>{console.log("Subscribed to topic:",e.data)})).catch((e=>{console.error("Error subscribing to topic:",e)})),Object(d.c)(t,(e=>{console.log("Message received:",e),o(e.notification.body),r(e.data.location)}))}),[e]);const i=t=>{l.a.post("http://your-server-ip:5000/update-availability",{forkliftIndex:e-1,available:t}).then((e=>{console.log(e.data)})).catch((e=>{console.error("Error updating availability:",e)}))};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Driver Interface"}),Object(b.jsx)("p",{children:t}),a&&Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:()=>{l.a.post("http://your-server-ip:5000/complete-task",{forkliftIndex:e-1,location:a}).then((e=>{console.log(e.data),r(null)})).catch((e=>{console.error("Error completing task:",e)}))},children:"Complete Task"})}),Object(b.jsx)("button",{onClick:()=>i(!0),children:"Available"}),Object(b.jsx)("button",{onClick:()=>i(!1),children:"Not Available"})]})};var j=function(){return Object(b.jsx)(n.a,{basename:"/dyforklift",children:Object(b.jsxs)(s.c,{children:[Object(b.jsx)(s.a,{path:"/driver/:id",element:Object(b.jsx)(f,{})}),Object(b.jsx)(s.a,{path:"/",element:Object(b.jsx)("div",{children:"Home Page"})})]})})};const u={apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a",measurementId:"G-2QJDPH5EGW"};let h,g;p.a.apps.length||(h=Object(p.a)(u),g=Object(d.a)(h)),Object(d.b)(g,{vapidKey:"qVbu8IcLjOokqpyf2rAFDH9yfm7cW4C131XYO2mTKho"}).then((e=>{e?console.log("Notification permission granted."):console.log("No registration token available. Request permission to generate one.")})).catch((e=>{console.log("An error occurred while retrieving token. ",e)})),Object(d.c)(g,(e=>{console.log("Message received. ",e)})),i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(j,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.198902d8.chunk.js.map