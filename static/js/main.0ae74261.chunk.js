(this["webpackJsonpdy-forklift-notifier"]=this["webpackJsonpdy-forklift-notifier"]||[]).push([[0],{28:function(e,o,t){"use strict";t.r(o);var n=t(0),r=t.n(n),i=t(12),c=t.n(i),a=t(17),s=t(3),l=t(30),d=t(10),p=t(11),f=t(7);Object(p.a)({apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a",measurementId:"G-2QJDPH5EGW"});var u=function(){const{id:e}=Object(s.q)(),[o,t]=Object(n.useState)(""),[r,i]=Object(n.useState)(null);Object(n.useEffect)((()=>{const o=Object(d.a)();o.requestPermission().then((()=>o.getToken({vapidKey:"qVbu8IcLjOokqpyf2rAFDH9yfm7cW4C131XYO2mTKho"}))).then((o=>(console.log("Token:",o),l.a.post("http://your-server-ip:5000/subscribe",{token:o,topic:"forklift-".concat(e)})))).then((e=>{console.log("Subscribed to topic:",e.data)})).catch((e=>{console.error("Error subscribing to topic:",e)})),Object(d.c)(o,(e=>{console.log("Message received:",e),t(e.notification.body),i(e.data.location)}))}),[e]);const c=o=>{l.a.post("http://your-server-ip:5000/update-availability",{forkliftIndex:e-1,available:o}).then((e=>{console.log(e.data)})).catch((e=>{console.error("Error updating availability:",e)}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Driver Interface"}),Object(f.jsx)("p",{children:o}),r&&Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:()=>{l.a.post("http://your-server-ip:5000/complete-task",{forkliftIndex:e-1,location:r}).then((e=>{console.log(e.data),i(null)})).catch((e=>{console.error("Error completing task:",e)}))},children:"Complete Task"})}),Object(f.jsx)("button",{onClick:()=>c(!0),children:"Available"}),Object(f.jsx)("button",{onClick:()=>c(!1),children:"Not Available"})]})};var b=function(){return Object(f.jsx)(a.a,{basename:"/dyforklift",children:Object(f.jsxs)(s.c,{children:[Object(f.jsx)(s.a,{path:"/driver/:id",element:Object(f.jsx)(u,{})}),Object(f.jsx)(s.a,{path:"/",element:Object(f.jsx)("div",{children:"Home Page"})})]})})};const h={apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a",measurementId:"G-2QJDPH5EGW"};let g,j;p.a.apps.length||(g=Object(p.a)(h),j=Object(d.a)(g));const k=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-9]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function v(e,o){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const t=e.installing;null!=t&&(t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),o&&o.onUpdate&&o.onUpdate(e)):(console.log("Content is cached for offline use."),o&&o.onSuccess&&o.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}Object(d.b)(j,{vapidKey:"qVbu8IcLjOokqpyf2rAFDH9yfm7cW4C131XYO2mTKho"}).then((e=>{e?console.log("Notification permission granted."):console.log("No registration token available. Request permission to generate one.")})).catch((e=>{console.log("An error occurred while retrieving token. ",e)})),Object(d.c)(j,(e=>{console.log("Message received. ",e)})),c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dyforklift",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const o="".concat("/dyforklift","/service-worker.js");k?(!function(e,o){fetch(e,{headers:{"Service-Worker":"script"}}).then((t=>{const n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):v(e,o)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(o,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):v(o,e)}))}}()}},[[28,1,2]]]);
//# sourceMappingURL=main.0ae74261.chunk.js.map