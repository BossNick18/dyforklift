(this["webpackJsonpdy-forklift-notifier"]=this["webpackJsonpdy-forklift-notifier"]||[]).push([[0],{22:function(e,t,o){},29:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=o(11),c=o.n(r),a=(o(22),o(17)),s=o(3),l=o(31),d=o(10),p=o(12),f=o(7);Object(p.a)({apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a",measurementId:"G-2QJDPH5EGW"});var u=function(){const{id:e}=Object(s.q)(),[t,o]=Object(n.useState)(""),[i,r]=Object(n.useState)(null);Object(n.useEffect)((()=>{const t=Object(d.a)();t.requestPermission().then((()=>t.getToken({vapidKey:"qVbu8IcLjOokqpyf2rAFDH9yfm7cW4C131XYO2mTKho"}))).then((t=>(console.log("Token:",t),l.a.post("http://your-server-ip:5000/subscribe",{token:t,topic:"forklift-".concat(e)})))).then((e=>{console.log("Subscribed to topic:",e.data)})).catch((e=>{console.error("Error subscribing to topic:",e)})),Object(d.b)(t,(e=>{console.log("Message received:",e),o(e.notification.body),r(e.data.location)}))}),[e]);const c=t=>{l.a.post("http://your-server-ip:5000/update-availability",{forkliftIndex:e-1,available:t}).then((e=>{console.log(e.data)})).catch((e=>{console.error("Error updating availability:",e)}))};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Driver Interface"}),Object(f.jsx)("p",{children:t}),i&&Object(f.jsx)("div",{children:Object(f.jsx)("button",{onClick:()=>{l.a.post("http://your-server-ip:5000/complete-task",{forkliftIndex:e-1,location:i}).then((e=>{console.log(e.data),r(null)})).catch((e=>{console.error("Error completing task:",e)}))},children:"Complete Task"})}),Object(f.jsx)("button",{onClick:()=>c(!0),children:"Available"}),Object(f.jsx)("button",{onClick:()=>c(!1),children:"Not Available"})]})};var b=function(){return Object(f.jsx)(a.a,{children:Object(f.jsxs)(s.c,{children:[Object(f.jsx)(s.a,{path:"/driver/:id",element:Object(f.jsx)(u,{})}),Object(f.jsx)(s.a,{path:"/",element:Object(f.jsx)("div",{children:"Home Page"})})]})})};const h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.\d+){3}$/));function g(e,t){navigator.serviceWorker.register(e).then((e=>{e.onupdatefound=()=>{const o=e.installing;null!=o&&(o.onstatechange=()=>{"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((e=>{console.error("Error during service worker registration:",e)}))}var j=e=>{e&&e instanceof Function&&o.e(3).then(o.bind(null,32)).then((t=>{let{getCLS:o,getFID:n,getFCP:i,getLCP:r,getTTFB:c}=t;o(e),n(e),i(e),r(e),c(e)}))};const k=Object(p.a)({apiKey:"AIzaSyBKrtlWdUW7zO9g9zm9slaguHQmF6kJuV0",authDomain:"diyouforklfitapp.firebaseapp.com",projectId:"diyouforklfitapp",storageBucket:"diyouforklfitapp.appspot.com",messagingSenderId:"728063402975",appId:"1:728063402975:web:ef09e7cb6df5ef0ddcda6a"}),v=Object(d.a)(k);Object(d.b)(v,(e=>{console.log("Message received. ",e)})),c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsx)(b,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dyforklift",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(()=>{const t="".concat("/dyforklift","/service-worker.js");h?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((o=>{const n=o.headers.get("content-type");404===o.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((e=>{e.unregister().then((()=>{window.location.reload()}))})):g(e,t)})).catch((()=>{console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((()=>{console.log("This web app is being served cache-first by a service worker.")}))):g(t,e)}))}}(),j()}},[[29,1,2]]]);
//# sourceMappingURL=main.90fb7470.chunk.js.map